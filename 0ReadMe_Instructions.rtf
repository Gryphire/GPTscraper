{\rtf1\ansi\ansicpg1252\cocoartf2638
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica-Bold;\f1\fswiss\fcharset0 Helvetica-Oblique;\f2\fswiss\fcharset0 Helvetica;
\f3\fswiss\fcharset0 Helvetica-BoldOblique;\f4\froman\fcharset0 Times-Roman;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red0\green0\blue0;\red255\green255\blue255;
\red255\green255\blue255;\red0\green0\blue0;}
{\*\expandedcolortbl;;\csgray\c0;\cssrgb\c0\c0\c0;\cssrgb\c100000\c100000\c99971\c0;
\cssrgb\c100000\c100000\c100000;\cssrgb\c0\c1\c1;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid1\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listlevel\levelnfc4\levelnfcn4\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{lower-alpha\}.}{\leveltext\leveltemplateid2\'02\'01.;}{\levelnumbers\'01;}\fi-360\li1440\lin1440 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{hyphen\}}{\leveltext\leveltemplateid3\'01\uc0\u8259 ;}{\levelnumbers;}\fi-360\li2160\lin2160 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{hyphen\}}{\leveltext\leveltemplateid4\'01\uc0\u8259 ;}{\levelnumbers;}\fi-360\li2880\lin2880 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{hyphen\}}{\leveltext\leveltemplateid5\'01\uc0\u8259 ;}{\levelnumbers;}\fi-360\li3600\lin3600 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid101\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listlevel\levelnfc4\levelnfcn4\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{lower-alpha\}.}{\leveltext\leveltemplateid102\'02\'01.;}{\levelnumbers\'01;}\fi-360\li1440\lin1440 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid201\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{hyphen\}}{\leveltext\leveltemplateid302\'01\uc0\u8259 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid4}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}}
\paperw11900\paperh16840\margl1440\margr1440\vieww17940\viewh8660\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0

\f0\b\fs24 \cf0 \
INSTRUCTION DOCUMENT\
How to Generate a CSV File for Finetuning from Facebook Messenger & Twitter Data + Running Finetuning\

\f1\i\b0 compiled by Nastasia Griffioen on February 22nd 2023, updated on March 1st 2023.\
\

\f0\i0\b IMPORTANT
\f2\b0 : In order to run this file, you will 
\f3\i\b need
\f0\i0  
\f2\b0 to at least have some Facebook Messenger data files (see instructions below for how to obtain those). You can opt out of using Twitter data, but unfortunately at this point in time the scraper script (script 1) does not accommodate for a lack of Facebook Messenger data just yet.
\f1\i \
\

\f2\i0 \

\f0\b SOFTWARE PREP
\f2\b0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls1\ilvl0\cf0 {\listtext	1.	}Download R from 
\f0\b https://cran.r-project.org/
\f2\b0 \
{\listtext	2.	}Download Visual Studio Code (ONLY needed if you want to explore the script, running of the script will be done from Terminal). You can download VSCode from 
\f0\b https://code.visualstudio.com/download
\f2\b0  \
{\listtext	3.	}Installing Xcode and Homebrew (\ul for Mac users only!\ulnone ):\
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls1\ilvl1\cf0 {\listtext	a.	}For Xcode:\
\pard\tx1660\tx2160\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li2160\fi-2160\pardirnatural\partightenfactor0
\ls1\ilvl2\cf0 {\listtext	\uc0\u8259 	}Check if you have Xcode installed. In your Terminal, type 
\f0\b \cf2 \CocoaLigature0 xcode-select -p
\f2\b0 . If a path is returned, you have Xcode already installed.\
\pard\tx1660\tx2160\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li2160\fi-2160\pardirnatural\partightenfactor0
\ls1\ilvl2\CocoaLigature1 {\listtext	\uc0\u8259 	}\CocoaLigature0 If you still need to get Xcode, go to the App Store on your Mac, search for Xcode and download+install from the App Store.\
\pard\tx1660\tx2160\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li2160\fi-2160\pardirnatural\partightenfactor0
\ls1\ilvl2\cf0 \CocoaLigature1 {\listtext	\uc0\u8259 	}Final step is to ensure you have the command line tools associated with Xcode installed as well. Head to your Terminal and type in: 
\f0\b Xcode-select -install\
\ls1\ilvl2
\f2\b0 {\listtext	\uc0\u8259 	}Once you do this, you should have all necessary Xcode tools installed!\
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls1\ilvl1\cf0 {\listtext	b.	}For Homebrew: \
\pard\tx1660\tx2160\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li2160\fi-2160\pardirnatural\partightenfactor0
\ls1\ilvl2\cf0 {\listtext	\uc0\u8259 	}Follow the instructions in this video: https://drive.google.com/file/d/19fApnIlCoWIKPVIP7EbpgHH6HNorXSCb/view?usp=share_link Note: The Homebrew installation might take some time (e.g., 10 minutes or more), so keep that in mind.  \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls1\ilvl0\cf0 {\listtext	4.	}Installing Python 3 (\ul for both Mac and Windows users\ulnone ):\
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls1\ilvl1\cf0 {\listtext	a.	}For Mac users:\
\pard\tx1660\tx2160\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li2160\fi-2160\pardirnatural\partightenfactor0
\ls1\ilvl2\cf0 {\listtext	\uc0\u8259 	}Checking if Python 3 is already installed on your machine. To check this, go to the Terminal and type: 
\f0\b python3 \'97version.
\f2\b0  If it returns a Python version as response, you know you have Python 3 installed already.\
{\listtext	\uc0\u8259 	}If you find that you need to install Python 3, do this through the Terminal once more: 
\f0\b brew install python3
\f2\b0 . Please note: the installation of Python 3 may take up to 30 minutes, so keep this in mind. \
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls1\ilvl1\cf0 {\listtext	b.	}For Windows users:\
\pard\tx1660\tx2160\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li2160\fi-2160\pardirnatural\partightenfactor0
\ls1\ilvl2\cf0 {\listtext	\uc0\u8259 	}Checking is Python 3 is already installed on your machine.\
{\listtext	\uc0\u8259 	}If you find that you need to install Python 3, first go to the Python website (www.python.org.downloads). \
\pard\tx2380\tx2880\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li2880\fi-2880\pardirnatural\partightenfactor0
\ls1\ilvl3\cf0 {\listtext	\uc0\u8259 	}Hit \'91Download the Latest Version for Windows\'92. \
{\listtext	\uc0\u8259 	}Once the download is complete, run the .exe file. \
\pard\tx3100\tx3600\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li3600\fi-3600\pardirnatural\partightenfactor0
\ls1\ilvl4\cf0 {\listtext	\uc0\u8259 	}Make sure that you check \'91Add Python to PATH\'92 on the first installation screen. \
{\listtext	\uc0\u8259 	}On the final installation screen, make sure to click \'91Disable path limit length\'92.\
\pard\tx2380\tx2880\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li2880\fi-2880\pardirnatural\partightenfactor0
\ls1\ilvl3\cf0 {\listtext	\uc0\u8259 	}Once installation is complete, open your Command Prompt and run the following command (but remember to insert your own username first): 
\f0\b cd C:\\Users\\<username>\\AppData\\Local\\Programs\\Python
\f2\b0 . \
{\listtext	\uc0\u8259 	}Now that you are located in the installation folder, check that the installation has gone well by typing in: 
\f0\b python.exe
\f2\b0 . If this command returns a Python version that matches the one you download from the Python website, the installation has gone to plan. \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls1\ilvl0\cf0 {\listtext	5.	}Set up OpenAI (\ul for both Mac and Windows users\ulnone ):\
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls1\ilvl1\cf0 {\listtext	a.	}Create an OpenAI account on https://beta.openai.com/signup \
{\listtext	b.	}Open your Terminal or Command Prompt and install the openAI API using the following command
\fs22 :
\fs24 \cf3  
\f0\b \cb4 \expnd0\expndtw0\kerning0
pip install --upgrade openai
\f2\b0 . Note: you might need to substitute 
\f0\b pip
\f2\b0  with 
\f0\b pip3
\f2\b0  in order for it to work with Python 3. 
\f4\fs30 \cf5 \cb1 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0

\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 \

\f0\b DATA DOWNLOAD
\f2\b0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls2\ilvl0\cf0 {\listtext	1.	}Log in to your Facebook account and download your data file on your laptop/desktop.\
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls2\ilvl1\cf0 {\listtext	a.	}Click on your profile image in the top right\
{\listtext	b.	}Click on Settings & Privacy\
{\listtext	c.	}Click on Settings\
{\listtext	d.	}Click on Privacy\
{\listtext	e.	}Click on Your Facebook Information\
{\listtext	f.	}Click on View next to Download Profile Information\
{\listtext	g.	}Under Select File Options, choose Format JSON and Date Range All Time\
{\listtext	h.	}Under Select Information to Download, click Deselect All\
{\listtext	i.	}Once all data types are deselected, reselect Messages\
{\listtext	j.	}Scroll to the very bottom and hit Request a Download. Note: it may take some time for the download to be ready, so do this in advance of the workshop. \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls2\ilvl0\cf0 {\listtext	2.	}On your Desktop, create a folder called Finetuning (or any other name you desire, just make sure you adapt future steps accordingly).\
{\listtext	3.	}Go to Github and download the required scripts. https://github.com/Gryphire/GPTscraper Save them to your Finetuning folder.\
{\listtext	4.	}Once you have downloaded your data package, which will be in the form of a .zip file, open it up.\
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls2\ilvl1\cf0 {\listtext	a.	}Go to Messages subfolder, then to Inbox. \
{\listtext	b.	}You will see folder names with the Facebook username of your conversation partner, each with a data file within. All of the message data files have the same name; \'91message_1.json\'92. \
{\listtext	c.	}Extract a minimum of 10 JSON files from within these named folders and paste them into your Finetuning folder. \
{\listtext	d.	}To ensure the files will be recognised by the scraper script we\'92ll use, rename the files to \'91fb_message_1\'92, \'91fb_message_2\'92, \'91fb_message_3\'92, etc. \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0
\cf0 \

\f0\b RUNNING THE SCRAPER SCRIPTS
\f2\b0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls3\ilvl0\cf0 {\listtext	1.	}Time to run the first script, which is 1JSONParseToOutput.py. Open Terminal (or Command Prompt) and ensure you\'92re in the Finetuning folder. On Mac, use \'91cd Desktop/Finetuning\'92 to do this. On Windows, this command will look more like 
\f0\b cd C:\\Users\\<username>\\Desktop
\f2\b0 .
\f0\b  
\f2\b0 Remember to change this command based on your chosen name for your folder. Fun fact to help you remember this command: \'91cd\'92 stands for 
\f0\b \'91
\f2\b0 change directory\'92. (:\
{\listtext	2.	}Still in the Terminal, now type in 
\f0\b python 1JSONParseToOutput.py
\f2\b0  and hit Enter to run.  When the script is running, you will see some messages indicating the progress of the script. You will also be asked to specify your name (by answering in the Terminal), as well as your Twitter username (make sure you check what your username is exactly) if you also want some Twitter data scraped. Twitter data scraping is not necessary and may be skipped if desired.\
{\listtext	3.	}Check in your Finetuning folder that four new files have been generated, all starting with output_.\
{\listtext	4.	}Now it\'92s time to move on to the second script. This is an R script, which we also will be running from the Terminal. Given that you have installed R, your machine will now be able to run R scripts from the terminal. You do this by typing the following command in your terminal (again, make sure you are still located in your Finetuning folder): 
\f0\b Rscript 2FormattingOutputToCSV.R.
\f2\b0  While the script is running, you will be first asked to specify your directory through a dialog prompt: make sure you select your Finetuning folder. You will then also be asked to indicate again your name from a list of detected names. \
{\listtext	5.	}Check that the script has succeeded by taking a look in your Finetuning folder. You should see a new file there, called \'91trainingdata.csv\'92. Open it up, and you will see two columns: the first column being called \'91prompt\'92 and being empty, and the second column being called \'91completion\'92, with all of your Facebook and, if you opted to scrape those, Twitter messages in that column. Now you\'92re ready to start finetuning!\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0
\cf0 \

\f0\b FINETUNING
\f2\b0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls4\ilvl0\cf0 {\listtext	1.	}Open your Terminal/Command Prompt again if necessary, and make sure you are in your Finetuning folder (for Terminal, use the pwd command if needed to check). \
{\listtext	2.	}We now first need to ensure your .csv trainingdata file is formatted be\cf3 fore we can ask OpenAI to finetune a model on it. Luckily OpenAI has a tool for this, which we will run from the Terminal. Type in: 
\f0\b \expnd0\expndtw0\kerning0
openai tools fine_tunes.prepare_data -f trainingdata.csv
\f2\b0 . You will see that as a result of this operation a .JSONL file will be added to your Finetuning folder.\
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls4\ilvl1\cf3 \kerning1\expnd0\expndtw0 {\listtext	\uc0\u8259 	}OpenAI might ask you to respond to some questions. It might highlight some duplicate rows, and other formatting requests (of which it will take care itself if you agree). \cf5 \expnd0\expndtw0\kerning0
\
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls4\ilvl0\cf0 \kerning1\expnd0\expndtw0 {\listtext	3.	}Before we can finetune, OpenAI needs to know your API key. Get this from your profile on 
\f0\b https://platform.openai.com/overview,
\f2\b0  under View API Keys. Copy the API key. \
{\listtext	4.	}Setting the OpenAI API Key:\
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls4\ilvl1\cf0 {\listtext	\uc0\u8259 	}On Mac: In your Terminal, type in 
\f0\b \cf3 \expnd0\expndtw0\kerning0
export OPENAI_API_KEY="<OPENAI_API_KEY>\'94
\f2\b0 , and substitute <OPENAI_API_KEY> with the key you just \cf6 copied from the OpenAI website. Hit Enter. \
\pard\tx940\tx1440\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li1440\fi-1440\pardirnatural\partightenfactor0
\ls4\ilvl1\cf6 \kerning1\expnd0\expndtw0 {\listtext	\uc0\u8259 	}On Windows: In the Command prompt, type in 
\f0\b setx OPENAI_API_KEY \'93<KEY>\'94
\f2\b0 , and substitute <KEY> with the key you just copied from the OpenAI website. Hit Enter. For Windows users there is then one more step necessary to process this key setup: close the Command Prompt window and restart the Command Prompt. Remember to re-navigate into your Finetuning folder. For some reason, restarting the Command Prompt is necessary on Windows in order to Windows to process the change.
\f4\fs30 \cf5 \expnd0\expndtw0\kerning0
\
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls4\ilvl0
\f2\fs24 \cf0 \kerning1\expnd0\expndtw0 {\listtext	5.	}Finally, time to initiate finetuning! In your Terminal, type: 
\f0\b \cf3 \expnd0\expndtw0\kerning0
openai api fine_tunes.create -t trainingdata_prepared.jsonl -m davinci
\f2\b0 . No need to specify the whole path, as long as your current directory within the Terminal is still your Finetuning folder.\
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\pardirnatural\partightenfactor0
\ls4\ilvl0\cf3 \kerning1\expnd0\expndtw0 {\listtext	6.	}You shall see that the OpenAI API will start finetuning. Using the commands offered in the Terminal you will be able to check back in every once in a while to track the progress of your finetuning job.\
{\listtext	7.	}When you see that the finetuning job is complete, log back in to OpenAI at https://platform.openai.com/overview and head to the Playground. In the Playground, you will see that you can select a Model in the right hand toolbar. Scroll down to find a model with the date of when you finetuned your model (name will look something like 
\f0\b davinci:ft-personal-yyyy-mm-dd-
\f2\b0 etc.\
}